# Напишите два сервиса:

1. API сервис сообщений.
2. Листенер для проверки сообщений.

Описание системы:
- Клиент отправляет сообщение в API сервис.
- Сервис сохраняет сообщение в БД (продумать таблицу(ы) самостоятельно) со статусом "на проверке". В БД сообщение может
находится в трёх состояниях: на проверке, заблокировано, корректно (review, blocked, correct).
- Сервис кладёт сообщение в кафку, которую читает листенер.
- Листенер проверяет, что в тексте сообщения не встречается слово "АБРАКАДАБРА" (в любом регистре).
- После того, как листенер проверит сообщение, он отправляет в API сервис статус проверки (true/false).
- API сервис изменяет статус сообщения. Если сообщение корректно, для него устанавливается статус "корректно", иначе - "
заблокировано".

1. **API сервис.**
   
   Два роута:

      1) POST _/api/v1/message_
      Тело запроса:       
      ```json
      {
      "user_id": 123, // int
      "message": "text" // str
      }
      ```

      2) POST _/api/v1/message_confirmation_
         Тело запроса:
      ```json
      {
      "message_id": 123, // int, ID записи в БД
       "success": true // bool, статус проверки 
      }
      ```

_*Для доступа к ручке(2) необходимо передавать заголовок Authorization. Содержимое заголовка - токен. Токен
известен листенеру и api сервису._

2. **Листенер**
   
   В бесконечном цикле читает сообщения из кафки.
   Проверяет наличие запрещенного контента в сообщении.
   Отправляет в api сервис результат проверки.

Будем плюсом:

    • В качестве токена будет использован JWT, содержащий роль (например "post_message_confirm").
    • Документация по запуску.
    • Покрытие кода тестами.
    • Docker и docker-compose файлы.


## Setup project with Docker

1) #### Change enviroments

    - Rename `.env.example` to `.env`

2) #### Build project

   ```shell
   docker-compose -f docker-compose.yaml build
   ```

3) #### Up project

   ```shell
   docker-compose -f docker-compose.yaml up -d
   ```

